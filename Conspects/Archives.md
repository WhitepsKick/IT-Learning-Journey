## Архивы в Linux
### Сжатие и восстановление файлов
`gunzip`(восстановление) и `gzip`(сжатие) данные команды используются для сжатия и восстановления файлов с расширением `.gz`
#### GZIP GUNZIP
`gzip [OPTION] ... [FILE] ...`
- Пример: `gzip book.pdf` сжимает указаный файл, таким же образом можно сжимать сразу несколько файлов `gzip book.pdf page.pdf`
- Аргументы:
  - `-k` не удаляет исходный файл
  - `-d` распаковывает архив
  - `-l` выводит список заархивированных файлов и каталогов
  - `-r` рекурсивная архивация содержимых каталогов
  - `-1` быстрое архивирование в ущерб размеру
  - `-9` медленное архивирование с упором на наименьший размер
- Также можно распаковать архив с помощью команды `gunzip`
если файл существует, то команда спросит надо ли перезаписывать его.
- По умолчанию команда также удаляет архив после распаковки, чтобы этого не произошло используем `-k`
#### BZIP2 и BUNZIP2
Данные команды применяют другой алгоритм сжатия с сортировкой блоков Берроуза-Уиллера с последующим кодированием Хаффмана 
(создаваемые архивы имеют расширение `.bz2` и считаются что чуть более эффективно сжимают чем `gzip` - сжатые файлы получаются примерно на 10% меньше)
- Аргументы:
  - `-d` выполняет распаковку
  - `-z` выполняет сжатие
  - `-v` выводит сводку об операции
  - `-k` сохраняет сжимаемые файлы ( не удаляет )
  - `-f` перезаписывает уже существующие компоненты в сжатом файле
  - `-1 .. 9` уровень сжатия где: 1 наибыстрое сжатие, но наибольший размер, тогда как 9 наоборот
- Пример: `bzip2 -k book.pdf image.png` сжали два файла
    - тк сжимаемые файлы удаляются то: `bzip2 -k book.pdf image.png`
    - чтобы увидеть полную сводку по сжатию: `bzip2 -v book.pdf image.png`
    - используя `-d` можно распаковать `bzip2 -d -v book.pdf.bz2 image.pdf.bz2`
- Использование `bunzip2` во многом аналогично `bzip2` также с помощью этой команды можно распаковывать файлы сжатые с помощью gzip
#### XZ
- `xz [OPTION] ... [FILE] ...`
- Инструмент основан на алгоритме цепочке Лемпеля-Зива-Маркова (LZMA), известен высокой степенью сжатия и низким использованием памяти.
Чаще всего используется для сжатия больших файлов и каталогов, особенно в LINUX
- Аргументы:
  - `-z` сжатие файлов
  - `-d` распаковка файлов
  - `-t` проверка целостности сжатого файла
  - `-l` выводит информацию о файлах в архиве
  - `-k` сохраняет (не удаляет) входные файлы
  - `-f` принудительно перезаписывает выходной файл
  - `0 ... 9` задает уровень сжатия (по умолчанию = 6)
  - `-e` попытаться улучшить степпень сжатия, используя больше процессорного времени; не влияет на требование к памяти декомпрессора
  - `-T` устанавливает максимальное число потоков (Значение по умолчанию = 1, уст. знач. 0 чтобы использовать столько потоков, сколько имеется у процессора)
  - `-v` выводит подрбную сводку по операции
- Пример: `xz -v book.pdf image.png`
  - <img width="413" height="163" alt="image" src="https://github.com/user-attachments/assets/f8f72e47-b0dd-4d8e-b104-75399abc2c8b" />
- Для распаковки применим `-d`
- Пример: `xz -d -v book.pdf.xz image.png.xz`
  - <img width="422" height="130" alt="image" src="https://github.com/user-attachments/assets/0c828dcd-bfdd-4cff-93b6-3ec779f24708" />
#### TAR
- `tar` позволяет объединить несколько файлов в один архив
  - `tar [OPTIONS] [имя_архива] [файлы или папки для архивации]`
- Аргументы:
  - `-c` создает архив
  - `-d` сравнивает архивы или удаляет сожержимое архивов
  - `-r` добавляет файлы в конец архива
  - `-t` выводит содержимое архива
  - `-u` обновляет тольк те файлы, которые новее одноименных в архиве
  - `-x` извлекает файлы из архива
  - `-f` в качестве имени файла архива использует "ARCHIVE"
  - `-v` выводит подробный список обработанных файлов
  - `-z` для сжатия применяется утилита `gzip`
  - `-j` для сжатия применяется утилита `bzip2`
  - `-С` указывает путь куда будет распаковываться архив или позволяет включить в архив только относительные имена файлов и каталогов
- Пример: `tar -cvf archive.tar file1.txt image1.png index.html`
  - команде `tar` передаются опции заархивировать, вывесть подробную сводку операции и установить имя архивного файла.
  В данном примере подразумевается что архивируемые файлы лежат в каталоге в котором мы находимся и файл архива создается
 в этом же каталоге.
- Пример: `tar -cvf ~/archive.tar ~/Documents/hello.txt ~/Documents/image.png ~/Documents/index.html`
- подобным образом мы можем заархивировать весь домашний каталог `tar -cvf /tmp/home.tar /home`
- также можно создать бэкап всей системы заархивировав несколько каталогов `tar -cvf /tmp/system-backup.tar /home /srv /root /var`
- !!! **ИНКРЕМЕНТАЛЬНЫЙ БЭКАП** !!!
  - `-g` позволяет создать инкрементальный бэкап.
  - Например: забэкапим папку test
  - `mkdir backup 
  tar -czvg backup/snapshot-file -f backup/backup-initial.tar.gz test`
    - Мы создали папку "backup" и поместили туда файл "snapshot-file" который содержит список всех файлов входящих в бэкап.
    А файл "backup-initial.tar.gz" представляет сам бэкап
    - После создания бэкапап мы произвели некие изменения в файлах которые забэкапили и решили создать следующий бэкап:
    - `tar -czvg backup/shapshot-file -f backup/backup-02112025.tar.gz test`
    - Со временем мы случайно удалили папку test и решили ее восстановить, в такой ситуации нам придется выполнить разархивацию бэкапаов начиная с самых старых.
#### ZIP UNZIP
- `zip [OPTIONS] ARCHIVE FILES`
  - Например: `zip myfiles.zip book.pdf image.png`
- Аргументы:
  - `-r` рекурсивно архивирует содержимое папко
  - `-d` удаляет записи из архива
  - `-u` обновляет в архиве файлы, если архивируемые файлы ранее были изменены, или добавляет новые файлы, если их нет в архиве
  - `-1` быстрое сжатие
  - `-9` оптимальное сжатие
    - Например: `zip -r test.zip test`
- `unzip [OPTIONS] ARCHIVE`
- Аргументы:
  - `-l` выводит список компонентов архива
  - `-f` при распаковке всегда обновляет уже существующие одноименные файлы
  - `-n` при распаковке никогда не перзаписывает уже существующие одноменные файлы
  - `-d` устанавливает папку для распаковки
    - Например: `unzip -l myfiles.zip`
    - <img width="355" height="204" alt="image" src="https://github.com/user-attachments/assets/9160f057-934c-42ad-b1ed-1f1dcd5de556" />
    
